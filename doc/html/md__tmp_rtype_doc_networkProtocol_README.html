<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>R-Type: &lt;p align=&quot;center&quot;&gt;üåê Network protocol&lt;/p&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">R-Type
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">R-Type is a 3rd year Epitech project where a group of 4-6 students have to code an ersatz of the original horizontally scrolling shooter arcade video game from 1987 of the same name. In the span of 2 months, the goal is to learn the ECS architectural pattern to code the game in C++ with an additional 2-4 players coop.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"> align="center"üåê Network protocol</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md4"></a>
üë®‚Äçüíª TCP vs UDP</h1>
<p>TCP is a connection-oriented network protocol that ensures error checking, order of data transmission and flow/congestion control. It provides reliability when sending data between a server and a single client (for exemple with emails, google searches, downloads...). It however comes with the cost of having longer latency time and consuming more resources (as it has bigger headers on data) compared to UDP which is a message-oriented network protocol that broadcasts the server's data to multiple clients at the same time in services such as streaming or online video games.</p>
<p>Therefore, the use of UDP for in-game communication is appropriate/mandatory for this project and we chose to use TCP for the menu.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
üéÆ Menu and game</h1>
<p>As TCP is more reliable, it is used to convey crucial menu informations such as:</p><ul>
<li>editing a room (create, destroy, set the number of players)</li>
<li>interacting with a room (player entering, leaving, getting ready, starting the game)</li>
<li>in-game actions (quitting the game)</li>
</ul>
<p>On the other hand, UDP in-game data is sent more frequently and can afford having some of it lost (bad internet connection for exemple) when:</p><ul>
<li>an entity is updated (enemies or players created or destroyed)</li>
<li>a player input is sent (movement or shooting)</li>
</ul>
<h1><a class="anchor" id="autotoc_md6"></a>
üì¶ Packets</h1>
<p>The data is sent by those protocols in packets which form depends on who's sending it (server or client) and for what:</p><ul>
<li>A "magic number" (just some a few identifying bytes) at the start ensures that the packet's data (at least the start of it) has been sent/received correctly</li>
<li>A client id if the client is sending it to the server</li>
<li>A packet type:<ul>
<li>For the menu:<ul>
<li><code>ROOM_EDIT</code> Edit a room</li>
<li><code>ROOM_ACTION</code> Interact with the room</li>
<li><code>EVENT</code> In-game actions</li>
</ul>
</li>
<li>For the game:<ul>
<li><code>ENTITY</code> Entity updated (entity packets are always sent from server to client)</li>
<li><code>INPUT</code> Input sent (input packets are always sent from client to server)</li>
</ul>
</li>
</ul>
</li>
<li>An instruction type:<ul>
<li>For the menu:<ul>
<li>For <code>ROOM_EDIT</code>:<ul>
<li><code>UPDATE</code> Update a room (creates it if it doesn't exist)</li>
<li><code>DESTROY</code> Destroy a room</li>
</ul>
</li>
<li>For <code>ROOM_ACTION</code>:<ul>
<li><code>JOIN</code> Player joins a room</li>
<li><code>LEAVE</code> Player leaves a room</li>
<li><code>READY</code> Player is ready</li>
<li><code>UNREADY</code> Player is not ready</li>
</ul>
</li>
<li>For <code>EVENT</code>:<ul>
<li><code>GAME_START</code> Game starts</li>
<li><code>GAME_END</code> Game ends</li>
</ul>
</li>
</ul>
</li>
<li>For the game:<ul>
<li>For <code>ENTITY</code><ul>
<li><code>UPDATE</code> Update a player/enemy (creates it if it doesn't exist)</li>
<li><code>DESTROY</code> Destroy a player/enemy</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>The actual packet's data, its content depends on the packet and instruction type:<ul>
<li>For the menu:<ul>
<li>For <code>ROOM_EDIT</code>:<ul>
<li>For <code>UPDATE</code>:<ul>
<li>The current number of players in the room</li>
<li>The max number of players in the room</li>
<li>The room id</li>
</ul>
</li>
<li>For <code>DESTROY</code>:<ul>
<li>The room id</li>
</ul>
</li>
</ul>
</li>
<li>For <code>ROOM_ACTION</code>:<ul>
<li>For <code>JOIN</code>:<ul>
<li>The room id</li>
</ul>
</li>
<li>For <code>LEAVE</code>:<ul>
<li>The room id</li>
</ul>
</li>
<li>For <code>READY</code>:<ul>
<li>The room id</li>
</ul>
</li>
<li>For <code>UNREADY</code>:<ul>
<li>The room id</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>For the game:<ul>
<li>For <code>ENTITY</code>:<ul>
<li>For <code>UPDATE</code>:<ul>
<li>The entity</li>
</ul>
</li>
<li>For <code>DESTROY</code>:<ul>
<li>The entity</li>
</ul>
</li>
</ul>
</li>
<li>For <code>INPUT</code>:<ul>
<li>The input key</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>The same "magic number" as the start to make sure the whole packet has been sent/received </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
